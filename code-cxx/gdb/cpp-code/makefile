# SYNOPSIS:
#
#   make [all]  - makes everything.
#   make clean  - removes all files generated by make.

TARGET1 = opplus

# Where to find user code.
USER_DIR = .

CPPFLAGS += -isystem $(GTEST_DIR)/include -isystem $(GMOCK_DIR)/include 

# CXXFLAGS += -std=c++11 -g -Wall -Wextra -pthread -D_GLIBCXX_DEBUG
CXXFLAGS += -std=c++11 -g -O0 -Wall -Wextra  -fno-pic -fno-asynchronous-unwind-tables

TESTS = $(TARGET1)_out

# House-keeping build targets.
all : $(TESTS)

clean :
	rm -f $(TESTS) *.a *.o

#
$(TARGET1).o : $(TARGET1).cpp
	echo "$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $(TARGET1).cpp -o $(TARGET1).o"
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -c $(TARGET1).cpp -o $(TARGET1).o
#	gcc -g -c $(TARGET1).c -o $(TARGET1).o

$(TARGET1)_out : $(TARGET1).o 
	$(CXX) $(CPPFLAGS) $(CXXFLAGS) -lpthread $^ -o $@
#	gcc -g $^ -o $@

# objdump -d -Mintel -C opplus.o > opplus.s

